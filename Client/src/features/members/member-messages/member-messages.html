<div class="flex flex-col w-full h-[71vh]">
    <div class="flex flex-col flex-grow overflow-auto">
        @for(message of messages();track message.id) {
                <div class="chat" [class.chat-start]="!(message.senderId==accountService.currentUser()?.id)"
                [class.chat-end]="(message.senderId==accountService.currentUser()?.id)">
                    <div class="chat-image avatar">
                        <div class="w-10 rounded-full">
                        <img
                            alt="Tailwind CSS chat bubble component"
                            src="{{message.senderImageUrl || '/user.png'}}"
                        />
                        </div>
                    </div>
                    <div class="chat-header">
                        {{message.senderDisplayName}}
                            <time class="text-xs opacity-50">{{message.messageSent | date:'medium'}}</time>
                    </div>
                    <div class="chat-bubble">{{message.content}}</div>
                    <div class="chat-footer opacity-50">@if((message.senderId==accountService.currentUser()?.id)&&message.dateRead!=null){
                        <span>Seen at {{message.dateRead | date:'medium'}}</span>
                    }
                 @else if((message.senderId==accountService.currentUser()?.id)&&message.dateRead==null){
                        <span>Delivered</span>
                    }</div>
                </div>
            }
        <div #messageEndRef></div>
    </div>
    <div>
        <form class="flex gap-2 w-full" (ngSubmit)="sendMessage(messageContent)">
            <input type="text" placeholder="Type your message here" class="input input-bordered w-full"
            [(ngModel)]="messageContent" name="messageContent" required/>
            <button type="submit" class="btn btn-primary">Send</button>
        </form>
    </div>
</div>